### Test Refresh Token Flow
### Usage: Open in VS Code with REST Client extension

@baseUrl = http://localhost:3001/api/v1
@access_token = YOUR_ACCESS_TOKEN_HERE
@refresh_token = YOUR_REFRESH_TOKEN_HERE

### 1. Login to get tokens
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123"
}

### Expected Response:
# {
#   "access_token": "eyJhbGc...",
#   "refresh_token": "eyJhbGc...",
#   "user": {...}
# }

### 2. Test access token (should work)
GET {{baseUrl}}/account/profile
Authorization: Bearer {{access_token}}

### Expected: 200 OK

### 3. Wait 16 minutes (or manually set expired token)
### Then test with expired access token
GET {{baseUrl}}/account/profile
Authorization: Bearer {{access_token}}

### Expected: 401 Unauthorized if token expired

### 4. Refresh token to get new access token
POST {{baseUrl}}/auth/refresh
Content-Type: application/json

{
  "refresh_token": "{{refresh_token}}"
}

### Expected Response:
# {
#   "access_token": "NEW_TOKEN_HERE",
#   "refresh_token": "NEW_REFRESH_TOKEN_HERE"
# }

### 5. Test with new access token
GET {{baseUrl}}/account/profile
Authorization: Bearer NEW_ACCESS_TOKEN_FROM_STEP_4

### Expected: 200 OK
